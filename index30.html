<!DOCTYPE html>
<html>
    <head>
        <title>Пример 30</title>
    </head>
    <body>
        <script>
            var x = prompt('Введите число x:');
            var y = prompt('Введите число y:');
            var res = 0.0;
            function power(o,p){
                if (p > 0){
                    var z = 1;
                    for (var i = 0; i < p; i++){
                        z *= o;
                    }
                }
                else if (p < 0){
                    var z = 1;
                    for (var i = 0; i > p; i--){
                        z /= o;
                    }
                }
                else z = 1;
                return z;
            }
            function nod(o, p){
                var i = Math.abs(o);
                var k = Math.abs(p);
                var l = 1;
                var m = 1;
                if (i > k) var j = k;
                else var j = i;
                while (l < j){
                    l++;
                    if (k % l === 0 && i % l === 0) {
                        k /= l;
                        i /= l;
                        m *= l;
                        l = 1;
                    }
                }
                return m;
            }
            function power1(o,p){
                var i = 10;
                while(Number.isInteger(i * p) == false){
                    i *= 10;
                }
                var n = nod(i, i * p);
                var ch = p * i / n;
                var zn = Math.abs(i / n);
                if (o < 0 && zn % 2 == 0) return 'Данная комбинация степени и основания не имеет смысла';
                if (Math.abs(o) === 1) {
                    if (ch % 2 === 0)  return 1;
                    else  return o;
                }
                var top = o;
                var bot = 0.0;
                while (power(m, zn)  !== o){
                    if (m === (top + bot) / 2) return power(m,ch);
                    var m = (top + bot) / 2;
                    if (Math.abs(power(m, zn)) > Math.abs(o)) top = m;
                    else bot = m;
                }
                return power(m,ch);
            }

            if (Number.isNaN(parseFloat(x)) == false && Number.isNaN(parseFloat(y)) == false){
                if (x == 0 && y < 0){
                    alert('Данная комбинация степени и основания не имеет смысла');
                }
                else {if (parseInt(y) === parseFloat(y)) res = power(x,y);
                else res = power1(x,y);
                if (Number.isNaN(parseFloat(res))) alert(res);
                else alert('Число '+x+' в степени '+y+' равно '+ res);}
            }
            else alert('Показатель и основание степени могут быть только рациональными числами.');
        </script>
    </body>
</html>
